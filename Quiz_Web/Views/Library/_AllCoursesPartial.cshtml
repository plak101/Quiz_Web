@model List<Quiz_Web.Models.Entities.Course>

@if (Model == null || !Model.Any())
{
	<div class="empty-state text-center py-5">
		<div class="empty-icon mb-4">
			<i class="fas fa-book-open"></i>
		</div>
		<h4 class="empty-title">Chưa có khóa học nào</h4>
		<p class="empty-description">Bạn chưa mua khóa học nào. Hãy bắt đầu học ngay hôm nay!</p>
		<a href="/courses" class="btn btn-primary btn-lg mt-3">
			<i class="fas fa-search me-2"></i>Khám phá khóa học
		</a>
	</div>
}
else
{
	<div class="courses-grid">
		@foreach (var course in Model)
		{

			// Strip HTML tags from summary for clean text display
			var plainTextSummary = string.Empty;
			if (!string.IsNullOrEmpty(course.Summary))
			{
				plainTextSummary = System.Text.RegularExpressions.Regex.Replace(course.Summary, "<.*?>", string.Empty);
				plainTextSummary = System.Net.WebUtility.HtmlDecode(plainTextSummary);
				plainTextSummary = plainTextSummary.Trim();
			}


			<div class="course-card-wrapper">
				<div class="course-card">
					<!-- Course Image -->
					<div class="course-image-container">
						@if (!string.IsNullOrEmpty(course.CoverUrl))
						{
							<img src="@course.CoverUrl"
								 class="course-image"
								 alt="@course.Title"
								 onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 250%22%3E%3Crect fill=%22%235b6fd8%22 width=%22400%22 height=%22250%22/%3E%3Ctext fill=%22%23ffffff%22 font-family=%22Arial, sans-serif%22 font-size=%2260%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22%3E%F0%9F%93%9A%3C/text%3E%3C/svg%3E';">
						}
						else
						{
							<div class="course-placeholder">
								<i class="fas fa-book"></i>
							</div>
						}

						<!-- Free/Paid Badge -->
						@if (course.Price == 0)
						{
							<span class="course-badge badge-free">MIỄN PHÍ</span>
						}
					</div>

					<!-- Course Content -->
					<div class="course-content">
						<h3 class="course-title" title="@course.Title">@course.Title</h3>

						<p class="course-description">
							@if (!string.IsNullOrEmpty(plainTextSummary))
							{
								@(plainTextSummary.Length > 100 ? plainTextSummary.Substring(0, 100) + "..." : plainTextSummary)
							}
							else
							{
								<span class="text-muted">Chưa có mô tả</span>
							}
						</p>

						<!-- Course Footer -->
						<div class="course-footer">
							<div class="course-instructor">
								<i class="fas fa-user-circle"></i>
								<span>@course.Owner.FullName</span>
							</div>

							<div class="course-actions">
								<a href="/courses/@course.Slug/learn" class="btn btn-continue">
									<i class="fas fa-play-circle me-1"></i>
									Tiếp tục học
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		}
	</div>
}

<style>
	/* Empty State Styles */
	.empty-state {
		padding: 80px 20px;
	}

	.empty-icon {
		font-size: 80px;
		color: #cbd5e0;
	}

	.empty-title {
		font-size: 24px;
		font-weight: 600;
		color: #2d3748;
		margin-bottom: 12px;
	}

	.empty-description {
		font-size: 16px;
		color: #718096;
		margin-bottom: 24px;
	}

	/* Courses Grid */
	.courses-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
		gap: 24px;
		padding: 20px 0;
	}

	@@media (max-width: 768px) {
		.courses-grid {
			grid-template-columns: 1fr;
			gap: 16px;
		}
	}

	/* Course Card */
	.course-card-wrapper {
		position: relative;
	}

	.course-card {
		background: #ffffff;
		border-radius: 12px;
		overflow: hidden;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		height: 100%;
		display: flex;
		flex-direction: column;
		position: relative;
	}

		.course-card:hover {
			transform: translateY(-6px);
			box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
		}

	/* Course Image */
	.course-image-container {
		position: relative;
		width: 100%;
		height: 200px;
		overflow: hidden;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	}

	.course-image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.3s ease;
	}

	.course-card:hover .course-image {
		transform: scale(1.05);
	}

	.course-placeholder {
		width: 100%;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
		background: linear-gradient(135deg, #5b6fd8 0%, #6b7fd9 100%);
		color: #ffffff;
		font-size: 64px;
	}

	/* Course Badge */
	.course-badge {
		position: absolute;
		top: 12px;
		left: 12px;
		padding: 6px 12px;
		border-radius: 6px;
		font-size: 11px;
		font-weight: 700;
		letter-spacing: 0.5px;
		text-transform: uppercase;
		z-index: 10;
	}

	.badge-free {
		background: #10b981;
		color: #ffffff;
	}

	/* Course Content */
	.course-content {
		padding: 20px;
		display: flex;
		flex-direction: column;
		flex: 1;
	}

	.course-title {
		font-size: 18px;
		font-weight: 600;
		color: #1a202c;
		margin: 0 0 12px 0;
		line-height: 1.4;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
		min-height: 50px;
	}

	.course-description {
		font-size: 14px;
		color: #718096;
		line-height: 1.6;
		margin: 0 0 16px 0;
		flex: 1;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
		min-height: 44px;
	}

	/* Course Footer */
	.course-footer {
		display: flex;
		flex-direction: column;
		gap: 12px;
		margin-top: auto;
		padding-top: 16px;
		border-top: 1px solid #e2e8f0;
	}

	.course-instructor {
		display: flex;
		align-items: center;
		gap: 8px;
		font-size: 13px;
		color: #4a5568;
	}

		.course-instructor i {
			font-size: 16px;
			color: #718096;
		}

	.course-actions {
		display: flex;
		gap: 8px;
	}

	.btn-continue {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		padding: 10px 20px;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		color: #ffffff;
		border: none;
		border-radius: 8px;
		font-size: 14px;
		font-weight: 600;
		text-decoration: none;
		transition: all 0.2s ease;
		cursor: pointer;
	}

		.btn-continue:hover {
			background: linear-gradient(135deg, #5568d3 0%, #6639a6 100%);
			color: #ffffff;
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
		}

	/* Responsive adjustments */
	@@media (max-width: 576px) {
		.course-card {
			border-radius: 8px;
		}

		.course-image-container {
			height: 180px;
		}

		.course-content {
			padding: 16px;
		}

		.course-title {
			font-size: 16px;
		}

		.btn-continue {
			padding: 8px 16px;
			font-size: 13px;
		}
	}
</style>
