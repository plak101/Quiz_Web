@model IEnumerable<Quiz_Web.Models.Entities.CourseCategory>

@{
    ViewData["Title"] = "trang chu";
    var fullName = User.Identity?.Name ?? "Người dùng";
    var recommendedCourses = ViewBag.RecommendedCourses as List<Quiz_Web.Models.Entities.Course> ?? new List<Quiz_Web.Models.Entities.Course>();
    var topRatedCourses = ViewBag.TopRatedCourses as List<Quiz_Web.Models.Entities.Course> ?? new List<Quiz_Web.Models.Entities.Course>();
    var publicFlashcardSets = ViewBag.PublicFlashcardSets as List<Quiz_Web.Models.Entities.FlashcardSet> ?? new List<Quiz_Web.Models.Entities.FlashcardSet>();
}

<!-- Category Navigation Section -->
<section class="category-navigation">
    <div class="category-nav-wrapper">
        
           @foreach (var category in Model)
        {
            <a href="@Url.Action("Category", "Course", new { category = category.Slug })" 
               class="category-nav-item">
                @category.Name
            </a>
        }
        
    </div>
</section>

<!-- User Greeting Section - Above Image -->
<section class="user-greeting-section bg-white py-3">
    <div class="container-fluid">
        <div class="d-flex align-items-center">
            <div class="user-avatar-large bg-dark text-white rounded-circle d-flex align-items-center justify-content-center fw-bold me-3">
                @{
                    var initials = string.Join("", fullName.Split(' ').Select(n => n.FirstOrDefault()).Take(2)).ToUpper();
                }
                @initials
            </div>
            <div>
                <h2 class="mb-0 text-dark fw-bold">Chào mừng @fullName trở lại!</h2>
            </div>
        </div>
    </div>
</section>

<!-- Welcome Section with Background Image (No Overlay) -->
<section class="welcome-section-with-image">
    <div class="container-fluid h-100">
        <div class="row h-100 align-items-center">
            <div class="col-lg-6 col-md-12">
                <div class="welcome-content">
                    <!-- Learning Prompt Card -->
                    <div class="learning-card bg-white p-4 rounded shadow">
                        <h3 class="h4 fw-bold mb-3 text-dark">Học những gì bạn có hứng thú</h3>
                        <p class="text-dark mb-0">
                            Các kỹ năng cho hiện tại (và tương lai của bạn). 
                            Hãy bắt đầu học với chúng tôi.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-12">
                <!-- Image will be shown on the right via background -->
            </div>
        </div>
    </div>
</section>

<!-- Recommended Courses Section -->
@if (recommendedCourses.Any())
{
    <section class="recommended-courses-section py-5">
        <div class="container-fluid">
            <div class="mb-4">
                <h2 class="fw-bold mb-2">Lĩnh vực sẽ học tiếp theo</h2>
                <p class="text-muted">Được đề xuất cho bạn</p>
            </div>
            
            <div class="courses-carousel-wrapper position-relative">
                <button class="carousel-nav-btn prev-btn" type="button" aria-label="Previous">
                    <i class="bi bi-chevron-left"></i>
                </button>
                
                <div class="courses-slider">
                    @foreach (var course in recommendedCourses)
                    {
                        <div class="course-card-wrapper">
                            <a href="@Url.Action("Detail", "Course", new { slug = course.Slug })" class="course-card">
                                <div class="course-image">
                                    @if (!string.IsNullOrEmpty(course.CoverUrl))
                                    {
                                        <img src="@course.CoverUrl" alt="@course.Title" />
                                    }
                                    else
                                    {
                                        <div class="course-image-placeholder">
                                            <i class="bi bi-book"></i>
                                        </div>
                                    }
                                </div>
                                <div class="course-info">
                                    <h3 class="course-title">@course.Title</h3>
                                    <p class="course-instructor">@course.Owner.FullName</p>
                                    <div class="course-rating">
                                        <span class="rating-value">@course.AverageRating.ToString("0.0")</span>
                                        <div class="stars">
                                            @for (int i = 1; i <= 5; i++)
                                            {
                                                var rating = (double)course.AverageRating;
                                                if (i <= Math.Floor(rating))
                                                {
                                                    <i class="bi bi-star-fill"></i>
                                                }
                                                else if (i - 0.5 <= rating)
                                                {
                                                    <i class="bi bi-star-half"></i>
                                                }
                                                else
                                                {
                                                    <i class="bi bi-star"></i>
                                                }
                                            }
                                        </div>
                                        <span class="review-count">(@course.TotalReviews.ToString("N0"))</span>
                                    </div>
                                    <div class="course-price">
                                        @if (course.Price > 0)
                                        {
                                            <span class="price">@course.Price.ToString("N0") ₫</span>
                                        }
                                        else
                                        {
                                            <span class="price free">Miễn phí</span>
                                        }
                                    </div>
                                </div>
                            </a>
                        </div>
                    }
                </div>
                
                <button class="carousel-nav-btn next-btn" type="button" aria-label="Next">
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>
}

<!-- Public Flashcard Sets Section -->
@if (publicFlashcardSets.Any())
{
    <section class="flashcard-sets-section py-5">
        <div class="container-fluid">
            <div class="mb-4">
                <h2 class="fw-bold mb-2">Bộ flashcard nên học</h2>
                <p class="text-muted">Học từ vựng và kiến thức một cách hiệu quả</p>
            </div>
            
            <div class="flashcards-carousel-wrapper position-relative">
                <button class="flashcard-carousel-nav-btn flashcard-prev-btn" type="button" aria-label="Previous">
                    <i class="bi bi-chevron-left"></i>
                </button>
                
                <div class="flashcards-slider">
                    @foreach (var flashcardSet in publicFlashcardSets)
                    {
                        <div class="flashcard-card-wrapper">
                            <a href="@Url.Action("Detail", "Flashcard", new { id = flashcardSet.SetId })" class="flashcard-card">
                                <div class="flashcard-image">
                                    @if (!string.IsNullOrEmpty(flashcardSet.CoverUrl))
                                    {
                                        <img src="@flashcardSet.CoverUrl" alt="@flashcardSet.Title" />
                                    }
                                    else
                                    {
                                        <div class="flashcard-image-placeholder">
                                            <i class="bi bi-card-text"></i>
                                        </div>
                                    }
                                    <div class="flashcard-count-badge">
                                        <i class="bi bi-layers"></i>
                                        @flashcardSet.Flashcards.Count() thẻ
                                    </div>
                                </div>
                                <div class="flashcard-info">
                                    <h3 class="flashcard-title">@flashcardSet.Title</h3>
                                    @if (!string.IsNullOrEmpty(flashcardSet.Description))
                                    {
                                        <p class="flashcard-description">@flashcardSet.Description</p>
                                    }
                                    <div class="flashcard-author">
                                        <i class="bi bi-person-circle"></i>
                                        <span>@flashcardSet.Owner.FullName</span>
                                    </div>
                                    @if (!string.IsNullOrEmpty(flashcardSet.Language))
                                    {
                                        <div class="flashcard-language">
                                            <i class="bi bi-globe"></i>
                                            <span>@flashcardSet.Language</span>
                                        </div>
                                    }
                                </div>
                            </a>
                        </div>
                    }
                </div>
                
                <button class="flashcard-carousel-nav-btn flashcard-next-btn" type="button" aria-label="Next">
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>
}

<!-- Top Rated Course Section - Featured Single Course -->
@if (topRatedCourses.Any())
{
    var topCourse = topRatedCourses.First(); // Lấy khóa học đầu tiên (rating cao nhất)
    
    <section class="top-rated-course-section py-5 bg-white">
        <div class="container-fluid">
            <div class="mb-4">
                <h2 class="fw-bold mb-2">Các khóa học hàng đầu chúng tôi tuyển chọn cho bạn</h2>
                <p class="text-muted">Được đánh giá cao nhất</p>
            </div>
            
            <a href="@Url.Action("Detail", "Course", new { slug = topCourse.Slug })" class="featured-course-card">
                <div class="row g-0 align-items-center">
                    <!-- Left: Image -->
                    <div class="col-md-5">
                        <div class="featured-course-image">
                            @if (!string.IsNullOrEmpty(topCourse.CoverUrl))
                            {
                                <img src="@topCourse.CoverUrl" alt="@topCourse.Title" />
                            }
                            else
                            {
                                <div class="featured-course-image-placeholder">
                                    <i class="bi bi-book"></i>
                                </div>
                            }
                            @if (topCourse.Category != null)
                            {
                                <div class="featured-course-badge">@topCourse.Category.Name</div>
                            }
                            @if (topCourse.CreatedAt >= DateTime.UtcNow.AddDays(-30))
                            {
                                <div class="featured-badge-bestseller">Bán chạy nhất</div>
                            }
                        </div>
                    </div>
                    
                    <!-- Right: Info -->
                    <div class="col-md-7">
                        <div class="featured-course-content">
                            <div class="featured-course-header">
                                <h3 class="featured-course-title">@topCourse.Title</h3>
                                <p class="featured-course-summary">@topCourse.Summary</p>
                            </div>
                            
                            <div class="featured-course-meta">
                                <div class="featured-course-rating">
                                    <span class="rating-value-large">@topCourse.AverageRating.ToString("0.0")</span>
                                    <div class="stars-large">
                                        @for (int i = 1; i <= 5; i++)
                                        {
                                            var rating = (double)topCourse.AverageRating;
                                            if (i <= Math.Floor(rating))
                                            {
                                                <i class="bi bi-star-fill"></i>
                                            }
                                            else if (i - 0.5 <= rating)
                                            {
                                                <i class="bi bi-star-half"></i>
                                            }
                                            else
                                            {
                                                <i class="bi bi-star"></i>
                                            }
                                        }
                                    </div>
                                    <span class="review-count-large">(@topCourse.TotalReviews.ToString("N0") đánh giá)</span>
                                </div>
                                
                                <div class="featured-course-instructor">
                                    <i class="bi bi-person-circle"></i>
                                    <span>Bởi @topCourse.Owner.FullName</span>
                                </div>
                                
                                <div class="featured-course-stats">
                                    <span class="stat-item">
                                        <i class="bi bi-clock"></i>
                                        Tổng số 18,5 giờ
                                    </span>
                                    <span class="stat-item">
                                        <i class="bi bi-bar-chart"></i>
                                        Sơ cấp
                                    </span>
                                    <span class="stat-item">
                                        <i class="bi bi-calendar3"></i>
                                        Đã cập nhật @(topCourse.UpdatedAt?.ToString("MM/yyyy") ?? topCourse.CreatedAt.ToString("MM/yyyy"))
                                    </span>
                                </div>
                            </div>
                            
                            <div class="featured-course-footer">
                                <div class="featured-course-price">
                                    @if (topCourse.Price > 0)
                                    {
                                        <span class="price-large">@topCourse.Price.ToString("N0") ₫</span>
                                    }
                                    else
                                    {
                                        <span class="price-large free">Miễn phí</span>
                                    }
                                </div>
                                <button type="button" class="btn-enroll-featured">
                                    Đăng ký ngay
                                    <i class="bi bi-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </section>
}

@section Styles {
    <link rel="stylesheet" href="~/css/home/category-nav.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/welcome-section.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/featured-course.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        /* Override container padding for this page to make navigation flush */
        body > .container {
            padding: 0;
        }
        
        body > .container > main {
            padding: 0;
        }
        
        /* User Greeting Section - Above the image */
        .user-greeting-section {
            background-color: #ffffff;
            padding: 20px 0;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .user-greeting-section .user-avatar-large {
            width: 64px;
            height: 64px;
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .user-greeting-section h2 {
            font-size: 28px;
            color: #1c1d1f;
        }
        
        /* Welcome section with background image - NO OVERLAY */
        .welcome-section-with-image {
            background-image: url('/asset/image/home/image1.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 500px;
            position: relative;
        }
        
        .welcome-section-with-image .container-fluid {
            position: relative;
            z-index: 2;
        }
        
        /* Learning card with white background */
        .learning-card {
            max-width: 500px;
            background-color: #ffffff !important;
        }
        
        /* Force black text color */
        .learning-card h3,
        .learning-card p {
            color: #000000 !important;
        }
        
        /* Recommended Courses Section */
        .recommended-courses-section {
            background-color: #f7f9fa;
            width: 100vw;
            margin-left: calc(50% - 50vw);
            padding-left: calc(50vw - 50%);
            padding-right: calc(50vw - 50%);
        }
        
        .recommended-courses-section .container-fluid {
            max-width: 1340px;
            margin: 0 auto;
            padding-left: 24px;
            padding-right: 24px;
        }
        
        .recommended-courses-section h2 {
            font-size: 32px;
            color: #1c1d1f;
        }
        
        .courses-carousel-wrapper {
            position: relative;
            padding: 0 50px;
        }
        
        .courses-slider {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 10px 0;
        }
        
        .courses-slider::-webkit-scrollbar {
            display: none;
        }
        
        .course-card-wrapper {
            flex: 0 0 auto;
            width: 300px;
        }
        
        .course-card {
            display: block;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            height: 100%;
        }
        
        .course-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        .course-image {
            width: 100%;
            height: 180px;
            overflow: hidden;
            background: #f0f0f0;
        }
        
        .course-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .course-image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 48px;
        }
        
        .course-info {
            padding: 16px;
        }
        
        .course-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #1c1d1f;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 48px;
        }
        
        .course-instructor {
            font-size: 13px;
            color: #6a6f73;
            margin-bottom: 8px;
        }
        
        .course-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .rating-value {
            font-weight: 700;
            color: #b4690e;
        }
        
        .stars {
            display: flex;
            gap: 2px;
            color: #b4690e;
        }
        
        .stars i {
            font-size: 12px;
        }
        
        .review-count {
            color: #6a6f73;
            font-size: 12px;
        }
        
        .course-price {
            font-size: 16px;
            font-weight: 700;
            color: #1c1d1f;
        }
        
        .course-price .free {
            color: #1c1d1f;
        }
        
        .carousel-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: white;
            border: 1px solid #d1d7dc;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }
        
        .carousel-nav-btn:hover {
            background: #f7f9fa;
            box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        }
        
        .carousel-nav-btn i {
            font-size: 24px;
            color: #1c1d1f;
        }
        
        .prev-btn {
            left: 0;
        }
        
        .next-btn {
            right: 0;
        }

        /* Flashcard Sets Section */
        .flashcard-sets-section {
            background-color: #ffffff;
            width: 100vw;
            margin-left: calc(50% - 50vw);
            padding-left: calc(50vw - 50%);
            padding-right: calc(50vw - 50%);
        }
        
        .flashcard-sets-section .container-fluid {
            max-width: 1340px;
            margin: 0 auto;
            padding-left: 24px;
            padding-right: 24px;
        }
        
        .flashcard-sets-section h2 {
            font-size: 32px;
            color: #1c1d1f;
        }
        
        .flashcards-carousel-wrapper {
            position: relative;
            padding: 0 50px;
        }
        
        .flashcards-slider {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 10px 0;
        }
        
        .flashcards-slider::-webkit-scrollbar {
            display: none;
        }
        
        .flashcard-card-wrapper {
            flex: 0 0 auto;
            width: 300px;
        }
        
        .flashcard-card {
            display: block;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            height: 100%;
            border: 1px solid #e8e8e8;
        }
        
        .flashcard-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            border-color: #5624d0;
        }
        
        .flashcard-image {
            width: 100%;
            height: 160px;
            overflow: hidden;
            background: #f0f0f0;
            position: relative;
        }
        
        .flashcard-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .flashcard-image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #5624d0 0%, #a435f0 100%);
            color: white;
            font-size: 48px;
        }
        
        .flashcard-count-badge {
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.75);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .flashcard-info {
            padding: 16px;
        }
        
        .flashcard-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #1c1d1f;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 48px;
        }
        
        .flashcard-description {
            font-size: 13px;
            color: #6a6f73;
            margin-bottom: 12px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .flashcard-author {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #6a6f73;
            margin-bottom: 6px;
        }
        
        .flashcard-author i {
            font-size: 16px;
        }
        
        .flashcard-language {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #5624d0;
            font-weight: 600;
        }
        
        .flashcard-carousel-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: white;
            border: 1px solid #d1d7dc;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }
        
        .flashcard-carousel-nav-btn:hover {
            background: #f7f9fa;
            box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        }
        
        .flashcard-carousel-nav-btn i {
            font-size: 24px;
            color: #1c1d1f;
        }
        
        .flashcard-prev-btn {
            left: 0;
        }
        
        .flashcard-next-btn {
            right: 0;
        }
        
        /* Responsive adjustments */
        @@media (max-width: 992px) {
            .user-greeting-section h2 {
                font-size: 24px;
            }
            
            .user-greeting-section .user-avatar-large {
                width: 56px;
                height: 56px;
                font-size: 20px;
            }
            
            .welcome-section-with-image {
                min-height: 400px;
            }
            
            .recommended-courses-section h2,
            .flashcard-sets-section h2 {
                font-size: 28px;
            }
            
            .courses-carousel-wrapper,
            .flashcards-carousel-wrapper {
                padding: 0 40px;
            }
        }
        
        @@media (max-width: 768px) {
            .user-greeting-section {
                padding: 15px 0;
            }
            
            .user-greeting-section h2 {
                font-size: 20px;
            }
            
            .user-greeting-section .user-avatar-large {
                width: 48px;
                height: 48px;
                font-size: 18px;
            }
            
            .welcome-section-with-image {
                min-height: 350px;
            }
            
            .learning-card {
                max-width: 100%;
            }
            
            .recommended-courses-section h2,
            .flashcard-sets-section h2 {
                font-size: 24px;
            }
            
            .courses-carousel-wrapper,
            .flashcards-carousel-wrapper {
                padding: 0 30px;
            }
            
            .course-card-wrapper,
            .flashcard-card-wrapper {
                width: 260px;
            }
            
            .carousel-nav-btn,
            .flashcard-carousel-nav-btn {
                width: 40px;
                height: 40px;
            }
            
            .carousel-nav-btn i,
            .flashcard-carousel-nav-btn i {
                font-size: 20px;
            }
        }
    </style>
}

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script src="~/js/Introduce.js" asp-append-version="true"></script>
    <script src="~/js/home/category-nav.js" asp-append-version="true"></script>
    <script>
        // Carousel navigation for courses
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.querySelector('.courses-slider');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            
            if (slider && prevBtn && nextBtn) {
                const scrollAmount = 320; // card width (300) + gap (20)
                
                prevBtn.addEventListener('click', function() {
                    slider.scrollBy({
                        left: -scrollAmount,
                        behavior: 'smooth'
                    });
                });
                
                nextBtn.addEventListener('click', function() {
                    slider.scrollBy({
                        left: scrollAmount,
                        behavior: 'smooth'
                    });
                });
                
                // Update button states based on scroll position
                function updateButtonStates() {
                    const isAtStart = slider.scrollLeft <= 0;
                    const isAtEnd = slider.scrollLeft >= slider.scrollWidth - slider.clientWidth - 1;
                    
                    prevBtn.style.opacity = isAtStart ? '0.5' : '1';
                    prevBtn.style.cursor = isAtStart ? 'default' : 'pointer';
                    nextBtn.style.opacity = isAtEnd ? '0.5' : '1';
                    nextBtn.style.cursor = isAtEnd ? 'default' : 'pointer';
                }
                
                slider.addEventListener('scroll', updateButtonStates);
                updateButtonStates();
            }

            // Carousel navigation for flashcards
            const flashcardSlider = document.querySelector('.flashcards-slider');
            const flashcardPrevBtn = document.querySelector('.flashcard-prev-btn');
            const flashcardNextBtn = document.querySelector('.flashcard-next-btn');
            
            if (flashcardSlider && flashcardPrevBtn && flashcardNextBtn) {
                const scrollAmount = 320; // card width (300) + gap (20)
                
                flashcardPrevBtn.addEventListener('click', function() {
                    flashcardSlider.scrollBy({
                        left: -scrollAmount,
                        behavior: 'smooth'
                    });
                });
                
                flashcardNextBtn.addEventListener('click', function() {
                    flashcardSlider.scrollBy({
                        left: scrollAmount,
                        behavior: 'smooth'
                    });
                });
                
                // Update button states based on scroll position
                function updateFlashcardButtonStates() {
                    const isAtStart = flashcardSlider.scrollLeft <= 0;
                    const isAtEnd = flashcardSlider.scrollLeft >= flashcardSlider.scrollWidth - flashcardSlider.clientWidth - 1;
                    
                    flashcardPrevBtn.style.opacity = isAtStart ? '0.5' : '1';
                    flashcardPrevBtn.style.cursor = isAtStart ? 'default' : 'pointer';
                    flashcardNextBtn.style.opacity = isAtEnd ? '0.5' : '1';
                    flashcardNextBtn.style.cursor = isAtEnd ? 'default' : 'pointer';
                }
                
                flashcardSlider.addEventListener('scroll', updateFlashcardButtonStates);
                updateFlashcardButtonStates();
            }
        });
    </script>
}
